function createYearRangePicker({inputEl,dropdownEl,gridEl,applyEl,clearEl,minYear=1990,maxYear=new Date().getFullYear()+1,onChange=null,onApply=null,onClear=null}){let startYear=null,endYear=null;for(let y=minYear;y<=maxYear;y++){const div=document.createElement("div");div.className="year-item",div.textContent=y,div.dataset.year=y,gridEl.appendChild(div)}inputEl.addEventListener("click",(e)=>{e.preventDefault(),dropdownEl.classList.toggle("visible")}),document.addEventListener("click",(e)=>{!dropdownEl.contains(e.target)&&e.target!==inputEl&&dropdownEl.classList.remove("visible")}),gridEl.addEventListener("click",function(e){if(!e.target.classList.contains("year-item"))return;const year=parseInt(e.target.dataset.year);startYear===null?startYear=year:endYear===null?(endYear=year,endYear<startYear&&([startYear,endYear]=[endYear,startYear])):(startYear=year,endYear=null),updateSelectionDisplay(),onChange&&onChange(startYear,endYear)});function updateSelectionDisplay(){const items=gridEl.querySelectorAll(".year-item");items.forEach((item)=>{const y=parseInt(item.dataset.year);item.classList.remove("selected","range"),startYear!==null&&y===startYear&&item.classList.add("selected"),endYear!==null&&y===endYear&&item.classList.add("selected"),startYear!==null&&endYear!==null&&y>startYear&&y<endYear&&item.classList.add("range")}),startYear!==null&&endYear!==null?inputEl.value=startYear===endYear?`${startYear}`:`${startYear} - ${endYear}`:startYear!==null?inputEl.value=`${startYear}`:inputEl.value=""}clearEl.addEventListener("click",()=>{startYear=null,endYear=null,inputEl.value="",updateSelectionDisplay(),onClear&&onClear(),onChange&&onChange(null,null)}),applyEl.addEventListener("click",()=>{dropdownEl.classList.remove("visible");const finalStart=startYear,finalEnd=endYear===startYear?null:endYear;onApply&&onApply(finalStart,finalEnd)});return{clear:()=>clearEl.click(),apply:()=>applyEl.click(),getStart:()=>startYear,getEnd:()=>endYear}}function initYearRangePicker(selector,options={}){const el=document.querySelector(selector);if(!el)return;const minYear=parseInt(el.dataset.min)||options.minYear||1990,maxYear=parseInt(el.dataset.max)||options.maxYear||new Date().getFullYear()+1;return el.innerHTML=`<input class="year-range-input" placeholder="Select year range" readonly><div class="year-dropdown "><div class="year-grid"></div><div class="btn-row"><button class="apply-btn">Apply</button><button class="clear-btn">Clear</button></div></div>`,createYearRangePicker({inputEl:el.querySelector(".year-range-input"),dropdownEl:el.querySelector(".year-dropdown"),gridEl:el.querySelector(".year-grid"),applyEl:el.querySelector(".apply-btn"),clearEl:el.querySelector(".clear-btn"),minYear,maxYear,onApply:options.onApply,onChange:options.onChange,onClear:options.onClear})}